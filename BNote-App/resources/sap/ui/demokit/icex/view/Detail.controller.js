/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2016 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/IconPool"],function(C,I){"use strict";return C.extend("sap.ui.demokit.icex.view.Detail",{onInit:function(){var b=this.getOwnerComponent().getEventBus();b.subscribe("app","RefreshDetail",this.refreshDetail,this);this._setModel("sap-icon://question-mark");},_setModel:function(i){var f=this.getView().getModel("fav");var a=(f)?f.isFavorite(i):false;var m=this.getView().getModel();if(!m){m=new sap.ui.model.json.JSONModel({});this.getView().setModel(m);}var b=I.getIconInfo(i);var c=(!b)?"?":b.content.charCodeAt(0).toString(16);m.setData({name:i,id:c,showFavorite:!a,showUnfavorite:a,isPhone:sap.ui.Device.system.phone,isNoPhone:!sap.ui.Device.system.phone});},refreshDetail:function(c,e,d){if(d&&d.name){this._setModel(d.name);}},navBack:function(e){var b=this.getOwnerComponent().getEventBus();b.publish("nav","back");},favorite:function(e){var d=this.getView().getModel().getData();if(d&&d.name){var f=this.getView().getModel("fav");var n=f.toggleFavorite(d.name);if(sap.m.InstanceManager.hasOpenPopover()){sap.m.InstanceManager.closeAllPopovers();}if(n){sap.m.MessageToast.show('The icon has been added to your favorites');}else{sap.m.MessageToast.show('The icon has been removed from your favorites');}this._setModel(d.name);}}});});
